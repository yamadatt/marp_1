{"version":3,"file":"1.1.1.js","names":["_analyzeDesumasuDearu","require","_textlintRuleHelper","module","exports","context","Syntax","RuleError","report","getSource","helper","RuleHelper","desumasuList","dearuList","reportResult","list","desumasu","dearu","forEach","node","matches","match","message","value","line","lineNumber","column","columnIndex","Document","Str","isChildNode","Link","Image","BlockQuote","Emphasis","ListItem","text","retDesumasu","analyzeDesumasu","length","push","retDearu","analyzeDearu","desumasuCount","reduce","count","dearuCount"],"sources":["../src/1.1.1.js"],"sourcesContent":["// LICENSE : MIT\n\"use strict\";\n/*\n1.1.1.本文\n\n本文の文体は、敬体(ですます調)あるいは常体(である調)のどちらかで統一します。\n敬体と常体を混在させないようにします。\n敬体と常体のどちらを使うかは、文書の目的や読み手に応じて決めます。\n\n 敬体(ですます調)\n一般読者向けの紹介文、パンフレット、マニュアル、ウェブサイトの本文では、基本的に「敬体」を使います。\n親しみやすい、柔らかい雰囲気で内容を伝えることができます。\n\n 常体(である調)\n常体は、簡潔に、力強い雰囲気で内容を伝えることができる文体です\n丁寧ではない印象を読み手に与える場合があるため、通常、一般向けのマニュアルの本文では使われません。\n */\nimport { analyzeDesumasu, analyzeDearu } from \"analyze-desumasu-dearu\";\nimport { RuleHelper } from \"textlint-rule-helper\";\nmodule.exports = function (context) {\n    let { Syntax, RuleError, report, getSource } = context;\n    let helper = new RuleHelper(context);\n    let desumasuList = [];\n    let dearuList = [];\n\n    function reportResult(list, { desumasu, dearu }) {\n        list.forEach(({ node, matches }) => {\n            matches.forEach((match) => {\n                let message;\n                if (desumasu) {\n                    message = `本文を常体(である調)に統一して下さい。\\n本文の文体は、敬体(ですます調)あるいは常体(である調)のどちらかで統一します。\\n\"${match.value}\"が敬体(ですます調)です。`;\n                } else if (dearu) {\n                    message = `本文を敬体(ですます調)に統一して下さい。\\n本文の文体は、敬体(ですます調)あるいは常体(である調)のどちらかで統一します。\\n\"${match.value}\"が常体(である調)です。`;\n                }\n                report(\n                    node,\n                    new RuleError(message, {\n                        line: match.lineNumber - 1,\n                        column: match.columnIndex\n                    })\n                );\n            });\n        });\n    }\n\n    return {\n        [Syntax.Document]() {\n            desumasuList = [];\n            dearuList = [];\n        },\n        [Syntax.Str](node) {\n            // 本文以外は無視する\n            // => isUserWrittenNode\n            if (helper.isChildNode(node, [Syntax.Link, Syntax.Image, Syntax.BlockQuote, Syntax.Emphasis])) {\n                return;\n            }\n            // Listについては1.1.3. 箇条書きで扱う\n            if (helper.isChildNode(node, [Syntax.ListItem])) {\n                return;\n            }\n            let text = getSource(node);\n            let retDesumasu = analyzeDesumasu(text);\n            if (retDesumasu.length > 0) {\n                desumasuList.push({\n                    node: node,\n                    matches: retDesumasu\n                });\n            }\n            let retDearu = analyzeDearu(text);\n            if (retDearu.length > 0) {\n                dearuList.push({\n                    node: node,\n                    matches: retDearu\n                });\n            }\n        },\n        [`${Syntax.Document}:exit`]() {\n            let desumasuCount = desumasuList.reduce((count, { matches }) => count + matches.length, 0);\n            let dearuCount = dearuList.reduce((count, { matches }) => count + matches.length, 0);\n            if (desumasuCount === 0 || dearuCount === 0) {\n                return;\n            }\n            if (desumasuCount > dearuCount) {\n                reportResult(dearuList, { dearu: true });\n            } else if (desumasuCount < dearuCount) {\n                reportResult(desumasuList, { desumasu: true });\n            } else {\n                reportResult(dearuList, { dearu: true });\n            }\n        }\n    };\n};\n"],"mappings":"AAAA;AACA,YAAY;;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAA,qBAAA,GAAAC,OAAA;AACA,IAAAC,mBAAA,GAAAD,OAAA;AACAE,MAAM,CAACC,OAAO,GAAG,UAAUC,OAAO,EAAE;EAChC,IAAI;IAAEC,MAAM;IAAEC,SAAS;IAAEC,MAAM;IAAEC;EAAU,CAAC,GAAGJ,OAAO;EACtD,IAAIK,MAAM,GAAG,IAAIC,8BAAU,CAACN,OAAO,CAAC;EACpC,IAAIO,YAAY,GAAG,EAAE;EACrB,IAAIC,SAAS,GAAG,EAAE;EAElB,SAASC,YAAYA,CAACC,IAAI,EAAE;IAAEC,QAAQ;IAAEC;EAAM,CAAC,EAAE;IAC7CF,IAAI,CAACG,OAAO,CAAC,CAAC;MAAEC,IAAI;MAAEC;IAAQ,CAAC,KAAK;MAChCA,OAAO,CAACF,OAAO,CAAEG,KAAK,IAAK;QACvB,IAAIC,OAAO;QACX,IAAIN,QAAQ,EAAE;UACVM,OAAO,GAAG,oEAAoED,KAAK,CAACE,KAAK,gBAAgB;QAC7G,CAAC,MAAM,IAAIN,KAAK,EAAE;UACdK,OAAO,GAAG,qEAAqED,KAAK,CAACE,KAAK,eAAe;QAC7G;QACAf,MAAM,CACFW,IAAI,EACJ,IAAIZ,SAAS,CAACe,OAAO,EAAE;UACnBE,IAAI,EAAEH,KAAK,CAACI,UAAU,GAAG,CAAC;UAC1BC,MAAM,EAAEL,KAAK,CAACM;QAClB,CAAC,CACL,CAAC;MACL,CAAC,CAAC;IACN,CAAC,CAAC;EACN;EAEA,OAAO;IACH,CAACrB,MAAM,CAACsB,QAAQ,IAAI;MAChBhB,YAAY,GAAG,EAAE;MACjBC,SAAS,GAAG,EAAE;IAClB,CAAC;IACD,CAACP,MAAM,CAACuB,GAAG,EAAEV,IAAI,EAAE;MACf;MACA;MACA,IAAIT,MAAM,CAACoB,WAAW,CAACX,IAAI,EAAE,CAACb,MAAM,CAACyB,IAAI,EAAEzB,MAAM,CAAC0B,KAAK,EAAE1B,MAAM,CAAC2B,UAAU,EAAE3B,MAAM,CAAC4B,QAAQ,CAAC,CAAC,EAAE;QAC3F;MACJ;MACA;MACA,IAAIxB,MAAM,CAACoB,WAAW,CAACX,IAAI,EAAE,CAACb,MAAM,CAAC6B,QAAQ,CAAC,CAAC,EAAE;QAC7C;MACJ;MACA,IAAIC,IAAI,GAAG3B,SAAS,CAACU,IAAI,CAAC;MAC1B,IAAIkB,WAAW,GAAG,IAAAC,qCAAe,EAACF,IAAI,CAAC;MACvC,IAAIC,WAAW,CAACE,MAAM,GAAG,CAAC,EAAE;QACxB3B,YAAY,CAAC4B,IAAI,CAAC;UACdrB,IAAI,EAAEA,IAAI;UACVC,OAAO,EAAEiB;QACb,CAAC,CAAC;MACN;MACA,IAAII,QAAQ,GAAG,IAAAC,kCAAY,EAACN,IAAI,CAAC;MACjC,IAAIK,QAAQ,CAACF,MAAM,GAAG,CAAC,EAAE;QACrB1B,SAAS,CAAC2B,IAAI,CAAC;UACXrB,IAAI,EAAEA,IAAI;UACVC,OAAO,EAAEqB;QACb,CAAC,CAAC;MACN;IACJ,CAAC;IACD,CAAC,GAAGnC,MAAM,CAACsB,QAAQ,OAAO,IAAI;MAC1B,IAAIe,aAAa,GAAG/B,YAAY,CAACgC,MAAM,CAAC,CAACC,KAAK,EAAE;QAAEzB;MAAQ,CAAC,KAAKyB,KAAK,GAAGzB,OAAO,CAACmB,MAAM,EAAE,CAAC,CAAC;MAC1F,IAAIO,UAAU,GAAGjC,SAAS,CAAC+B,MAAM,CAAC,CAACC,KAAK,EAAE;QAAEzB;MAAQ,CAAC,KAAKyB,KAAK,GAAGzB,OAAO,CAACmB,MAAM,EAAE,CAAC,CAAC;MACpF,IAAII,aAAa,KAAK,CAAC,IAAIG,UAAU,KAAK,CAAC,EAAE;QACzC;MACJ;MACA,IAAIH,aAAa,GAAGG,UAAU,EAAE;QAC5BhC,YAAY,CAACD,SAAS,EAAE;UAAEI,KAAK,EAAE;QAAK,CAAC,CAAC;MAC5C,CAAC,MAAM,IAAI0B,aAAa,GAAGG,UAAU,EAAE;QACnChC,YAAY,CAACF,YAAY,EAAE;UAAEI,QAAQ,EAAE;QAAK,CAAC,CAAC;MAClD,CAAC,MAAM;QACHF,YAAY,CAACD,SAAS,EAAE;UAAEI,KAAK,EAAE;QAAK,CAAC,CAAC;MAC5C;IACJ;EACJ,CAAC;AACL,CAAC","ignoreList":[]}